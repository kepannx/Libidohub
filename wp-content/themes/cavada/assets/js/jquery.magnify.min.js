!function(n){n.fn.magnify=function(e){var a,i,t,o,r=n.extend({debug:!1,speed:100,onload:function(){}},e),s=0,l=0,d=function(e){t=n(e),a=t.parents("a"),c(t.attr("data-magnify-src")||r.src||a.attr("href")||"")},c=function(e,d){if(e){var g=new Image;n(g).on({load:function(){t.css("display","block"),t.parent(".magnify").length||t.wrap('<div class="magnify"></div>'),i=t.parent(".magnify"),t.prev(".magnify-lens").length?i.children(".magnify-lens").css("background-image","url("+e+")"):t.before('<div class="magnify-lens loading" style="background:url('+e+') no-repeat 0 0"></div>'),o=i.children(".magnify-lens"),o.removeClass("loading"),s=g.width,l=g.height,r.debug&&console.log("[MAGNIFY] Got zoom image dimensions OK (width x height): "+s+" x "+l),g=null,r.onload(),i.mousemove(function(n){var e=i.offset(),a=n.pageX-e.left;if(nY=n.pageY-e.top,a<i.width()&&nY<i.height()&&a>0&&nY>0?o.fadeIn(r.speed):o.fadeOut(r.speed),o.is(":visible")){var d=a-o.width()/2,c=nY-o.height()/2;if(s&&l)var g=-1*Math.round(a/t.width()*s-o.width()/2),f=-1*Math.round(nY/t.height()*l-o.height()/2),h=g+"px "+f+"px";o.css({top:Math.round(c)+"px",left:Math.round(d)+"px",backgroundPosition:h||""})}}).mouseleave(function(){o.css("display","none")}),a.length&&(a.css("display","inline-block"),(d||a.attr("href")&&!t.attr("data-magnify-src")&&!r.src)&&a.click(function(n){n.preventDefault()}))},error:function(){g=null,d?r.debug&&console.log("[MAGNIFY] Parent anchor zoom source is invalid also. Disabling zoom..."):(r.debug&&console.log("[MAGNIFY] Invalid data-magnify-src. Looking in parent anchor instead -> "+a.attr("href")),c(a.attr("href"),!0))}}),g.src=e}};return this.each(function(){d(this)})}}(jQuery);